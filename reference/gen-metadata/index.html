<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta name="description" content="a tool to configure and create Kubernetes objects on multiple environments">


    <link rel="shortcut icon" href="/qbec/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/qbec/images/favicon.png" type="image/x-icon" />
    <title>Metadata for K8s objects :: Qbec</title>

    
    <link href="/qbec/css/nucleus.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/fontawesome-all.min.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/hybrid.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/featherlight.min.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/perfect-scrollbar.min.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/auto-complete.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/theme.css?1551397581" rel="stylesheet">
    <link href="/qbec/css/hugo-theme.css?1551397581" rel="stylesheet">
    
      <link href="/qbec/css/theme-blue.css?1551397581" rel="stylesheet">
    

    <script src="/qbec/js/jquery-2.x.min.js?1551397581"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    <style type="text/css">
    h1 {
        text-align: left;
        border-bottom: 4px solid #F0F2F4;
    }
    #chapter h1 {
        text-align: center !important;
    }
    #chapter p {
        text-align: left !important;
    }
</style>

  </head>
  <body class="" data-url="/qbec/reference/gen-metadata/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <p style="text-align: left; margin:0; padding: 0">
    <a style="font-weight: bold; color: white; font-family: 'work Sans',sans-serif; font-size: 14pt" id="logo" href="/">
        &#9884;
        qbec
    </a>
</p>

    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/qbec/getting-started/" title="Getting started" class="dd-item 
        
        
        
        ">
      <a href="/qbec/getting-started/">
          Getting started
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/qbec/userguide/" title="User guide" class="dd-item 
        
        
        
        ">
      <a href="/qbec/userguide/">
          User guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/qbec/userguide/tour/" title="A quick tour of qbec" class="dd-item ">
        <a href="/qbec/userguide/tour/">
        A quick tour of qbec
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/userguide/model/" title="Core concepts" class="dd-item ">
        <a href="/qbec/userguide/model/">
        Core concepts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/qbec/userguide/usage/" title="Using qbec" class="dd-item 
        
        
        
        ">
      <a href="/qbec/userguide/usage/">
          Using qbec
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/qbec/userguide/usage/basic/" title="Folders, files, parameters" class="dd-item ">
        <a href="/qbec/userguide/usage/basic/">
        Folders, files, parameters
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/userguide/usage/authoring/" title="Create components" class="dd-item ">
        <a href="/qbec/userguide/usage/authoring/">
        Create components
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/userguide/usage/commands/" title="Running qbec commands" class="dd-item ">
        <a href="/qbec/userguide/usage/commands/">
        Running qbec commands
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/userguide/usage/tips-and-tricks/" title="Tips and tricks" class="dd-item ">
        <a href="/qbec/userguide/usage/tips-and-tricks/">
        Tips and tricks
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/qbec/reference/" title="Reference" class="dd-item 
        parent
        
        
        ">
      <a href="/qbec/reference/">
          Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/qbec/reference/qbec-yaml/" title="Application YAML" class="dd-item ">
        <a href="/qbec/reference/qbec-yaml/">
        Application YAML
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/reference/gen-metadata/" title="Metadata for K8s objects" class="dd-item active">
        <a href="/qbec/reference/gen-metadata/">
        Metadata for K8s objects
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/reference/component-evaluation/" title="Component evaluation" class="dd-item ">
        <a href="/qbec/reference/component-evaluation/">
        Component evaluation
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/reference/diffs-and-patches/" title="Diffs and patches" class="dd-item ">
        <a href="/qbec/reference/diffs-and-patches/">
        Diffs and patches
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/qbec/reference/garbage-collection/" title="Garbage collection" class="dd-item ">
        <a href="/qbec/reference/garbage-collection/">
        Garbage collection
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/qbec/comparison-with-other-tools/" title="Comparison with other tools" class="dd-item 
        
        
        
        ">
      <a href="/qbec/comparison-with-other-tools/">
          Comparison with other tools
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/qbec/'>Home</a> > <a href='/qbec/reference/'>Reference</a> > Metadata for K8s objects
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#labels">Labels</a></li>
<li><a href="#annotations">Annotations</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Metadata for K8s objects</h1>
          

        




<h2 id="labels">Labels</h2>

<p>All Kubernetes objects produced by qbec have the following labels associated with them:</p>

<ul>
<li><code>qbec.io/application</code> - the app name from <code>qbec.yaml</code></li>
<li><code>qhec.io/environment</code> - the environment name in <code>qbec.yaml</code> for which the object was created</li>
</ul>

<p>The labels are used to efficiently find all cluster objects for a specific app and environment
for garbage collection.</p>

<div class="notices note" ><p>If you rename an app, environment, or component, garbage collection for the next immediate run of <code>qbec apply</code> may
not work correctly. Subsequent apply operations will then work as usual since the object labels will be updated with
the new values.</p>
</div>


<h2 id="annotations">Annotations</h2>

<p>All Kubernetes objects produced by qbec have the following annotation associated with them:</p>

<ul>
<li><code>qbec.io/last-applied</code> - this is the pristine version of the object stored for the purposes of diff and 3-way merge
patches and plays the same role as the <code>kubectl.kubernetes.io/last-applied-configuration</code> annotation set by <code>kubectl apply</code>.</li>
<li><code>qbec.io/component</code> - the component that created the object. This is derived from the file name of the component.</li>
</ul>

<p>The component annotation is used to respect component filters for <code>apply</code> and  <code>delete</code> operations.
Specifically, if <code>apply</code> is being run with component filters, only the extra remote objects matching the filter are
garbage-collected.</p>

<div class="notices note" ><p>If you are using qbec to update an object that was created by another tool, you may see strange diffs for the very first time when
this annotation is missing. Once applied, the annotation will now be in place and subsequent updates will show cleaner
diffs.</p>
</div>



<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/qbec/reference/qbec-yaml/" title="Application YAML"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/qbec/reference/component-evaluation/" title="Component evaluation" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/qbec/js/clipboard.min.js?1551397581"></script>
    <script src="/qbec/js/perfect-scrollbar.min.js?1551397581"></script>
    <script src="/qbec/js/perfect-scrollbar.jquery.min.js?1551397581"></script>
    <script src="/qbec/js/jquery.sticky.js?1551397581"></script>
    <script src="/qbec/js/featherlight.min.js?1551397581"></script>
    <script src="/qbec/js/html5shiv-printshiv.min.js?1551397581"></script>
    <script src="/qbec/js/highlight.pack.js?1551397581"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/qbec/js/modernizr.custom.71422.js?1551397581"></script>
    <script src="/qbec/js/learn.js?1551397581"></script>
    <script src="/qbec/js/hugo-learn.js?1551397581"></script>

    <link href="/qbec/mermaid/mermaid.css?1551397581" type="text/css" rel="stylesheet" />
    <script src="/qbec/mermaid/mermaid.js?1551397581"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

